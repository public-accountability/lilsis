# frozen_string_literal: true

module FECDonorQuery
  # str or entity --> [Donors]
  def self.run(search_term, matched: false)
    query = if search_term.is_a?(Entity)
              LsSearch.generate_search_terms(search_term)
            else
              search_term
            end

    ExternalData.search(query, {
                          indices: ['external_data_fec_donor_core'],
                          per_page: 1_000,
                          with: { matched: matched }
                        })
  end

  def self.random
    run Entity.find([211470,
                     184041,
                     13541,
                     243874,
                     13514,
                     117050,
                     260046,
                     136091,
                     117015,
                     25629,
                     13460,
                     363458,
                     211312,
                     93490,
                     4437,
                     259964,
                     199658,
                     183661,
                     136045,
                     116641,
                     93440,
                     4408,
                     328776,
                     211249,
                     199634,
                     183626,
                     116547,
                     47392,
                     25412,
                     328201,
                     211186,
                     199597,
                     116242,
                     25321,
                     234978,
                     183423,
                     135945,
                     116168,
                     25256,
                     116104,
                     4269,
                     25177,
                     362429,
                     199511,
                     115802,
                     25097,
                     13239,
                     71495,
                     13214,
                     326465,
                     47092,
                     24974,
                     210890,
                     155855,
                     135734,
                     92957,
                     71384,
                     24860,
                     361744,
                     326320,
                     326198,
                     233421,
                     210847,
                     155772,
                     210758,
                     71318,
                     46915,
                     199375,
                     24592,
                     232796,
                     210620,
                     135626,
                     115137,
                     71281,
                     258512,
                     360836,
                     232299,
                     182264,
                     12764,
                     232160,
                     210404,
                     155353,
                     92413,
                     3911,
                     324962,
                     114544,
                     24276,
                     324899,
                     210306,
                     155175,
                     12635,
                     360586,
                     199226,
                     179160,
                     114348,
                     92312,
                     3839,
                     210060,
                     199208,
                     70936].sample)
  end
end
